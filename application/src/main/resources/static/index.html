<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Real‑Time Food Quality Dashboard</title>
    <meta name="theme-color" content="#f0f4f8" />
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                50: "#f0f9ff",
                100: "#e0f2fe",
                200: "#bae6fd",
                300: "#7dd3fc",
                400: "#38bdf8",
                500: "#0ea5e9",
                600: "#0284c7",
                700: "#0369a1",
                800: "#075985",
                900: "#0c4a6e",
                950: "#082f49",
              },
              success: {
                50: "#f0fdf4",
                100: "#dcfce7",
                200: "#bbf7d0",
                300: "#86efac",
                400: "#4ade80",
                500: "#22c55e",
                600: "#16a34a",
                700: "#15803d",
                800: "#166534",
                900: "#14532d",
                DEFAULT: "#16a34a",
              },
              danger: {
                50: "#fef2f2",
                100: "#fee2e2",
                200: "#fecaca",
                300: "#fca5a5",
                400: "#f87171",
                500: "#ef4444",
                600: "#dc2626",
                700: "#b91c1c",
                800: "#991b1b",
                900: "#7f1d1d",
                DEFAULT: "#dc2626",
              },
              warning: {
                50: "#fffbeb",
                100: "#fef3c7",
                200: "#fde68a",
                300: "#fcd34d",
                400: "#fbbf24",
                500: "#f59e0b",
                600: "#d97706",
                700: "#b45309",
                800: "#92400e",
                900: "#78350f",
                DEFAULT: "#f59e0b",
              },
              gray: {
                50: "#f9fafb",
                100: "#f3f4f6",
                200: "#e5e7eb",
                300: "#d1d5db",
                400: "#9ca3af",
                500: "#6b7280",
                600: "#4b5563",
                700: "#374151",
                800: "#1f2937",
                900: "#111827",
                950: "#030712",
              },
            },
            fontFamily: {
              sans: ["Inter", "system-ui", "sans-serif"],
              display: ["'Inter'", "system-ui", "sans-serif"],
            },
            boxShadow: {
              card: "0 2px 6px rgba(0, 0, 0, 0.04), 0 10px 20px rgba(0, 0, 0, 0.04)",
              "card-hover":
                "0 10px 30px rgba(0, 0, 0, 0.08), 0 15px 35px rgba(0, 0, 0, 0.06)",
            },
            borderRadius: {
              card: "1rem",
            },
          },
        },
      };
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f9fafb;
        color: #1f2937;
      }
      #root {
        width: 100%;
        min-height: 100vh;
        background-color: #f9fafb;
        background-image: linear-gradient(
            to bottom,
            rgba(255, 255, 255, 0.8),
            rgba(249, 250, 251, 0.5)
          ),
          url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23e5e7eb' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }

      .dashboard-container {
        max-width: 1536px;
        margin: 0 auto;
        padding: 1.5rem;
      }

      @media (min-width: 640px) {
        .dashboard-container {
          padding: 2rem;
        }
      }

      @media (min-width: 1024px) {
        .dashboard-container {
          padding: 2.5rem;
        }
      }

      @media (max-width: 640px) {
        .charts-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .chart-container {
          min-height: 200px;
          padding: 1rem;
        }

        .stats {
          padding: 1rem;
          margin-bottom: 1rem;
        }

        h1 {
          font-size: 1.5rem !important;
        }

        .pagination {
          flex-direction: column;
          gap: 1rem;
        }

        .pagination button {
          width: 100%;
        }

        .pagination-info {
          order: -1;
          width: 100%;
          text-align: center;
        }

        input {
          font-size: 16px; /* Prevents iOS zoom */
        }

        .stats li {
          padding: 0.75rem;
          font-size: 0.875rem;
        }
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .charts-grid {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
      }

      .chart-container {
        width: 100%;
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        height: 400px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        animation: fadeIn 0.5s ease-out;
      }

      @media (max-width: 768px) {
        .chart-container {
          height: 300px;
          padding: 1rem;
        }
      }

      @media (max-width: 480px) {
        .chart-container {
          height: 250px;
          padding: 0.75rem;
        }
      }
      .chart-container:hover {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        transform: translateY(-2px);
      }
      .stats li {
        transition: all 0.2s;
        padding: 0.5rem;
        border-radius: 4px;
      }
      .stats li:hover {
        background-color: #f7fafc;
      }
      .anomaly-pulse {
        animation: pulse 2s infinite;
      }
      h1 {
        font-weight: 600;
        letter-spacing: -0.025em;
      }
      h2 {
        font-weight: 500;
        color: #2d3748;
        margin-top: 0;
      }
      ul {
        margin: 0;
      }
      .stats {
        background: white;
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        margin-bottom: 1.5rem;
        transition: all 0.3s ease;
      }
      .stats:hover {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      button {
        background-color: #4a5568;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 8px 16px;
        font-weight: 500;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }
      button:hover:not(:disabled) {
        background-color: #2d3748;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      button:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: none;
      }
      button:disabled {
        background-color: #cbd5e0;
        cursor: not-allowed;
      }
      .pagination {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1.5rem;
        margin-top: 2rem;
      }
      .pagination-info {
        padding: 6px 12px;
        background-color: #edf2f7;
        border-radius: 6px;
        font-size: 0.875rem;
        color: #4a5568;
        min-width: 120px;
        text-align: center;
        font-weight: 500;
      }
      .pagination button {
        min-width: 100px;
        justify-content: center;
      }
      .pagination button span {
        font-size: 1.2em;
        line-height: 1;
      }
      li:hover {
        transform: translateX(4px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }
      input {
        transition: all 0.2s;
      }
      input:focus {
        outline: none;
        border-color: #4a5568;
        box-shadow: 0 0 0 3px rgba(74, 85, 104, 0.2);
      }
      /* Modern grid layout and card styling overrides */
      @media (min-width: 768px) {
        .charts-grid {
          display: grid;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          gap: 2rem;
        }
      }
      @media (min-width: 640px) {
        .stats {
          display: grid;
          grid-template-columns: repeat(2, minmax(0, 1fr));
          gap: 2rem;
        }
      }
      .chart-container,
      .stats {
        border-radius: 1rem;
        padding: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        border: 1px solid rgba(229, 231, 235, 0.5);
        backdrop-filter: blur(8px);
        transition: none;
      }
      .chart-container:hover,
      .stats:hover {
        transform: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }
      /* Improved typography */
      h1 {
        font-size: 2.5rem;
        background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        text-fill-color: transparent;
      }
      h2 {
        font-size: 1.75rem;
        color: #0284c7;
        position: relative;
        padding-bottom: 0.5rem;
      }
      h2::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        height: 3px;
        width: 60px;
        background: linear-gradient(90deg, #0ea5e9, #38bdf8);
        border-radius: 3px;
      }
      /* Adding a glassmorphism effect to key elements */
      .stats {
        background-color: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(10px);
      }
      .chart-container {
        background-color: rgba(255, 255, 255, 0.85);
      }
      /* Custom scrollbar for modern browsers */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: #b7b7b7;
        border-radius: 10px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #a0a0a0;
      }
      /* Custom buttons with gradient */
      button {
        background: linear-gradient(to right, #0284c7, #0ea5e9);
        border-radius: 8px;
        padding: 10px 20px;
        font-weight: 500;
        transition: all 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
      }
      button:hover:not(:disabled) {
        background: linear-gradient(to right, #0369a1, #0284c7);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      button:disabled {
        background: linear-gradient(to right, #9ca3af, #d1d5db);
        cursor: not-allowed;
      }
      /* Enhanced input fields */
      input {
        transition: all 0.2s;
        border-radius: 8px;
        padding: 12px 16px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        font-size: 14px;
      }
      input:focus {
        outline: none;
        border-color: #0ea5e9;
        box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
      }
      /* Floating badge for connection status */
      .connection-status {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: 8px 16px;
        border-radius: 30px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: 100;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 13px;
        font-weight: 500;
        backdrop-filter: blur(8px);
        transition: all 0.3s ease;
      }
      .connection-status.connected {
        background-color: rgba(240, 253, 244, 0.9);
        color: #16a34a;
        border: 1px solid rgba(22, 163, 74, 0.3);
      }
      .connection-status.disconnected {
        background-color: rgba(254, 242, 242, 0.9);
        color: #dc2626;
        border: 1px solid rgba(220, 38, 38, 0.3);
      }
      /* Fixed height for the Recent Events container */
      .events-container {
        height: 460px;
        display: flex;
        flex-direction: column;
      }
      .events-list {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 1rem;
        padding-right: 0.5rem;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <script>
      // Initialize chart registry
      window.chartRegistry = window.chartRegistry || {};

      const { useState, useEffect } = React;
      function Dashboard() {
        const [events, setEvents] = useState([]);
        const [stats, setStats] = useState({});
        const [filter, setFilter] = useState("");
        const [page, setPage] = useState(1);
        const [connected, setConnected] = useState(false);
        const [error, setError] = useState(null);
        const eventsPerPage = 10;

        // Reset page when filter changes
        useEffect(() => {
          setPage(1);
        }, [filter]);

        // Filter and paginate events
        const filteredEvents = events.filter(
          (ev) =>
            filter === "" ||
            ev.deviceId.includes(filter) ||
            ev.temperature.toString().includes(filter) ||
            ev.humidity.toString().includes(filter)
        );

        const totalPages = Math.ceil(filteredEvents.length / eventsPerPage);
        const paginatedEvents = filteredEvents.slice(
          (page - 1) * eventsPerPage,
          page * eventsPerPage
        );

        useEffect(() => {
          const source = new EventSource("/events/stream");

          source.addEventListener("sensorEvent", (e) => {
            try {
              console.log("Raw SSE data:", e.data);
              const event = JSON.parse(e.data);
              console.log("Parsed event:", event);

              setEvents((prev) => {
                const newEvents = [event, ...prev].slice(0, 20);
                // update summary stats
                const temps = newEvents.map((ev) => ev.temperature);
                const hums = newEvents.map((ev) => ev.humidity);
                setStats({
                  tmin: Math.min(...temps).toFixed(1),
                  tmax: Math.max(...temps).toFixed(1),
                  tavg: (
                    temps.reduce((a, b) => a + b, 0) / temps.length
                  ).toFixed(1),
                  hmin: Math.min(...hums).toFixed(1),
                  hmax: Math.max(...hums).toFixed(1),
                  havg: (hums.reduce((a, b) => a + b, 0) / hums.length).toFixed(
                    1
                  ),
                });
                return newEvents;
              });
            } catch (error) {
              console.error("Error processing event:", error);
            }
          });

          source.addEventListener("error", (error) => {
            console.error("SSE Error:", error);
            setConnected(false);
            setError("Connection lost. Reconnecting...");
          });

          source.addEventListener("open", () => {
            console.log("SSE connection opened");
            setConnected(true);
            setError(null);
          });

          return () => {
            source.close();
            setConnected(false);
          };
        }, []);

        return React.createElement(
          "div",
          { className: "dashboard-container" },
          React.createElement(
            "div",
            {
              className:
                "sticky top-0 z-50 bg-white/90 backdrop-blur-md py-6 mb-8 border-b border-gray-200/50 shadow-sm",
            },
            React.createElement(
              "h1",
              {
                className: "text-4xl font-semibold mb-2 text-center",
              },
              "Food Quality Dashboard"
            ),
            React.createElement(
              "div",
              {
                className: "flex items-center justify-center gap-2 text-sm",
              },
              React.createElement("span", {
                className: `w-3 h-3 rounded-full transition-colors ${
                  connected ? "bg-success animate-pulse" : "bg-danger"
                }`,
              }),
              React.createElement(
                "span",
                {
                  className: `${
                    error
                      ? "text-danger"
                      : connected
                      ? "text-success"
                      : "text-gray-500"
                  } font-medium`,
                },
                error || (connected ? "Connected" : "Connecting...")
              )
            )
          ),
          React.createElement(Summary, { stats }),
          React.createElement(
            "div",
            { className: "charts-grid" },
            React.createElement(LineChart, {
              data: events,
              field: "temperature",
              label: "Temperature (°C)",
            }),
            React.createElement(LineChart, {
              data: events,
              field: "humidity",
              label: "Humidity (%)",
            })
          ),
          React.createElement(AnomalyList, { events }),
          React.createElement(
            "div",
            {
              className: `connection-status ${
                connected ? "connected" : "disconnected"
              }`,
            },
            React.createElement("span", {
              className: `w-2 h-2 rounded-full transition-colors ${
                connected ? "bg-success" : "bg-danger"
              }`,
            }),
            React.createElement(
              "span",
              null,
              connected ? "Live Connection" : "Reconnecting..."
            )
          )
        );
      }

      function Summary({ stats }) {
        if (!stats.tmin) {
          return React.createElement(
            "div",
            { className: "bg-white rounded-xl p-6 shadow-md" },
            React.createElement(
              "h2",
              { className: "text-xl font-semibold mb-4" },
              "Summary (last 20)"
            ),
            React.createElement(
              "p",
              { className: "text-gray-600" },
              "Waiting for data..."
            )
          );
        }
        return React.createElement(
          "div",
          { className: "stats" },
          React.createElement("h2", null, "Summary (last 20)"),
          React.createElement(
            "div",
            {
              style: {
                display: "grid",
                gridTemplateColumns: "1fr 1fr",
                gap: "1rem",
              },
            },
            React.createElement(
              "div",
              null,
              React.createElement(
                "h3",
                { style: { margin: "0 0 0.5rem", color: "#e41a1c" } },
                "Temperature"
              ),
              React.createElement(
                "ul",
                { style: { listStyle: "none", padding: 0 } },
                React.createElement("li", null, `Min: ${stats.tmin}°C`),
                React.createElement("li", null, `Max: ${stats.tmax}°C`),
                React.createElement("li", null, `Avg: ${stats.tavg}°C`)
              )
            ),
            React.createElement(
              "div",
              null,
              React.createElement(
                "h3",
                { style: { margin: "0 0 0.5rem", color: "#377eb8" } },
                "Humidity"
              ),
              React.createElement(
                "ul",
                { style: { listStyle: "none", padding: 0 } },
                React.createElement("li", null, `Min: ${stats.hmin}%`),
                React.createElement("li", null, `Max: ${stats.hmax}%`),
                React.createElement("li", null, `Avg: ${stats.havg}%`)
              )
            )
          )
        );
      }

      function LineChart({ data, field, label }) {
        const id = field + "Chart";
        useEffect(() => {
          let chart;
          const canvas = document.getElementById(id);
          const ctx = canvas.getContext("2d");

          // Cleanup any existing chart
          if (window.chartRegistry && window.chartRegistry[id]) {
            window.chartRegistry[id].destroy();
          }

          const thresholdConfig =
            field === "temperature"
              ? { value: 8.0, color: "rgba(255, 0, 0, 0.2)", label: "Max Temp" }
              : {
                  value: 50.0,
                  color: "rgba(0, 0, 255, 0.2)",
                  label: "Min Humidity",
                };

          window.chartRegistry[id] = new Chart(ctx, {
            type: "line",
            data: {
              labels: data
                .map((ev) => new Date(ev.timestamp).toLocaleTimeString())
                .reverse(),
              datasets: [
                {
                  label,
                  data: data.map((ev) => ev[field]).reverse(),
                  borderColor: field === "temperature" ? "#e53e3e" : "#3182ce",
                  backgroundColor:
                    field === "temperature"
                      ? "rgba(229, 62, 62, 0.1)"
                      : "rgba(49, 130, 206, 0.1)",
                  borderWidth: 2,
                  fill: true,
                  tension: 0.3,
                  pointRadius: 3,
                  pointHoverRadius: 5,
                },
                {
                  label: thresholdConfig.label,
                  data: new Array(data.length).fill(thresholdConfig.value),
                  borderColor: thresholdConfig.color,
                  borderWidth: 2,
                  borderDash: [5, 5],
                  fill: false,
                  pointRadius: 0,
                },
              ],
            },
            options: {
              animation: false,
              scales: {
                y: {
                  beginAtZero: true,
                  grid: { color: "#eee" },
                  ticks: {
                    maxTicksLimit: 6,
                    callback: (value) =>
                      `${value.toFixed(1)}${
                        field === "temperature" ? "°C" : "%"
                      }`,
                    font: {
                      size: window.innerWidth < 640 ? 10 : 12,
                    },
                  },
                },
                x: {
                  grid: { display: false },
                  ticks: {
                    maxTicksLimit: window.innerWidth < 640 ? 5 : 8,
                    maxRotation: 0,
                    minRotation: 0,
                    font: {
                      size: window.innerWidth < 640 ? 10 : 12,
                    },
                  },
                },
              },
              plugins: {
                legend: {
                  position: "top",
                  labels: {
                    boxWidth: window.innerWidth < 640 ? 8 : 12,
                    padding: window.innerWidth < 640 ? 10 : 15,
                    font: {
                      size: window.innerWidth < 640 ? 10 : 12,
                    },
                  },
                },
                tooltip: {
                  titleFont: {
                    size: window.innerWidth < 640 ? 10 : 12,
                  },
                  bodyFont: {
                    size: window.innerWidth < 640 ? 10 : 12,
                  },
                  padding: window.innerWidth < 640 ? 6 : 8,
                },
              },
              responsive: true,
              maintainAspectRatio: false,
              resizeDelay: 100,
            },
          });
        }, [data]);
        return React.createElement(
          "div",
          { className: "chart-container" },
          React.createElement("canvas", { id })
        );
      }

      function AnomalyList({ events }) {
        const [filter, setFilter] = useState("");
        const [page, setPage] = useState(1);
        const eventsPerPage = 10;

        // Filter events
        const filteredEvents = events.filter(
          (ev) =>
            filter === "" ||
            ev.deviceId.toLowerCase().includes(filter.toLowerCase()) ||
            ev.temperature.toString().includes(filter) ||
            ev.humidity.toString().includes(filter)
        );

        // Calculate pagination
        const totalPages = Math.ceil(filteredEvents.length / eventsPerPage);
        const paginatedEvents = filteredEvents.slice(
          (page - 1) * eventsPerPage,
          page * eventsPerPage
        );

        const isAnomaly = (event) =>
          event.temperature > 8.0 || event.humidity < 50.0;

        const getStyle = (event) => {
          const isAnomalyEvent = isAnomaly(event);
          return {
            color: isAnomalyEvent ? "#e53e3e" : "#2d3748",
            padding: "12px",
            backgroundColor: isAnomalyEvent
              ? "rgba(229, 62, 62, 0.05)"
              : "white",
            borderRadius: "8px",
            marginBottom: "8px",
            boxShadow: "0 1px 2px rgba(0, 0, 0, 0.05)",
            display: "flex",
            alignItems: "center",
            gap: "8px",
            fontSize: "0.9rem",
          };
        };

        const getStatusIcon = (event) => {
          const isAnomalyEvent = isAnomaly(event);
          return React.createElement(
            "span",
            {
              style: {
                backgroundColor: isAnomalyEvent ? "#e53e3e" : "#48bb78",
                color: "white",
                borderRadius: "50%",
                width: "24px",
                height: "24px",
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                flexShrink: 0,
              },
            },
            isAnomalyEvent ? "⚠️" : "✓"
          );
        };

        if (events.length === 0) {
          return React.createElement(
            "div",
            { className: "stats" },
            React.createElement("h2", null, "Recent Events"),
            React.createElement("p", null, "Waiting for events...")
          );
        }

        return React.createElement(
          "div",
          { className: "stats events-container" },
          React.createElement("h2", null, "Recent Events"),
          // Search input
          React.createElement("input", {
            type: "text",
            value: filter,
            onChange: (e) => setFilter(e.target.value),
            placeholder: "Search by device ID, temperature, or humidity...",
            style: {
              width: "100%",
              padding: "8px",
              marginBottom: "1rem",
              borderRadius: "4px",
              border: "1px solid #ddd",
            },
          }),
          // Events list
          React.createElement(
            "ul",
            {
              className: "events-list",
              style: { listStyle: "none", padding: 0 },
            },
            paginatedEvents.map((ev, i) =>
              React.createElement(
                "li",
                {
                  key: i,
                  style: getStyle(ev),
                },
                getStatusIcon(ev),
                React.createElement(
                  "div",
                  { style: { flex: 1 } },
                  React.createElement(
                    "div",
                    {
                      style: {
                        display: "flex",
                        justifyContent: "space-between",
                        alignItems: "center",
                        marginBottom: "4px",
                      },
                    },
                    React.createElement(
                      "strong",
                      null,
                      `Device ${ev.deviceId}`
                    ),
                    React.createElement(
                      "span",
                      {
                        style: {
                          color: "#718096",
                          fontSize: "0.8rem",
                        },
                      },
                      new Date(ev.timestamp).toLocaleTimeString()
                    )
                  ),
                  React.createElement(
                    "div",
                    {
                      style: {
                        display: "flex",
                        gap: "1rem",
                      },
                    },
                    React.createElement(
                      "span",
                      {
                        style: {
                          color: ev.temperature > 8.0 ? "#e53e3e" : "#2d3748",
                        },
                      },
                      `${ev.temperature.toFixed(1)}°C`
                    ),
                    React.createElement(
                      "span",
                      {
                        style: {
                          color: ev.humidity < 50.0 ? "#e53e3e" : "#2d3748",
                        },
                      },
                      `${ev.humidity.toFixed(1)}%`
                    )
                  )
                )
              )
            )
          ),
          // Pagination controls
          React.createElement(
            "div",
            { className: "pagination" },
            React.createElement(
              "button",
              {
                onClick: () => setPage((p) => Math.max(1, p - 1)),
                disabled: page === 1,
              },
              React.createElement("span", null, "←"),
              "Previous"
            ),
            React.createElement(
              "span",
              { className: "pagination-info" },
              `${(page - 1) * eventsPerPage + 1}-${Math.min(
                page * eventsPerPage,
                filteredEvents.length
              )} of ${filteredEvents.length}`
            ),
            React.createElement(
              "button",
              {
                onClick: () => setPage((p) => Math.min(totalPages, p + 1)),
                disabled: page === totalPages,
              },
              "Next",
              React.createElement("span", null, "→")
            )
          )
        );
      }

      ReactDOM.render(
        React.createElement(Dashboard),
        document.getElementById("root")
      );
    </script>
  </body>
</html>
